# ğŸ”Œ API ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨

### 1. ì¸ì¦ ë° ì‚¬ìš©ì ê´€ë¦¬

#### Phase 1: ê¸°ë³¸ ì¸ì¦ ì‹œìŠ¤í…œ (í˜„ì¬)
- [1.1 ì‚¬ìš©ì íšŒì›ê°€ì…](#11-ì‚¬ìš©ì-íšŒì›ê°€ì…)
- [1.2 ì‚¬ìš©ì ë¡œê·¸ì¸](#12-ì‚¬ìš©ì-ë¡œê·¸ì¸)
- [1.3 í† í° ê°±ì‹ ](#13-í† í°-ê°±ì‹ )
- [1.4 ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ](#14-ì‚¬ìš©ì-ë¡œê·¸ì•„ì›ƒ)

#### Phase 2: IAM ê¸°ë°˜ ê³ ê¸‰ ì‹œìŠ¤í…œ (ì¶”í›„)
- [1.5 IAM ê¸°ë°˜ ì‚¬ìš©ì íšŒì›ê°€ì…](#15-iam-ê¸°ë°˜-ì‚¬ìš©ì-íšŒì›ê°€ì…)
- [1.6 IAM ê¸°ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸](#16-iam-ê¸°ë°˜-ì‚¬ìš©ì-ë¡œê·¸ì¸)
- [1.7 IAM í† í° ê°±ì‹ ](#17-iam-í† í°-ê°±ì‹ )
- [1.8 IAM ê¸°ë°˜ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ](#18-iam-ê¸°ë°˜-ì‚¬ìš©ì-ë¡œê·¸ì•„ì›ƒ)
- [1.9 IAM ê·¸ë£¹ ê´€ë¦¬](#19-iam-ê·¸ë£¹-ê´€ë¦¬)
- [1.10 IAM ì •ì±… ê´€ë¦¬](#110-iam-ì •ì±…-ê´€ë¦¬)
- [1.11 IAM ê¶Œí•œ ê²€ì¦](#111-iam-ê¶Œí•œ-ê²€ì¦)

### 2. ë¡œê·¸ì¸ í ì‹œìŠ¤í…œ
- [2.1 ë¡œê·¸ì¸ í ì§„ì…](#21-ë¡œê·¸ì¸-í-ì§„ì…)
- [2.2 ë¡œê·¸ì¸ í ìƒíƒœ ì¡°íšŒ](#22-ë¡œê·¸ì¸-í-ìƒíƒœ-ì¡°íšŒ)
- [2.3 ë¡œê·¸ì¸ í ì²˜ë¦¬](#23-ë¡œê·¸ì¸-í-ì²˜ë¦¬)
- [2.4 ë¡œê·¸ì¸ í í‡´ì¥](#24-ë¡œê·¸ì¸-í-í‡´ì¥)

### 3. ê²Œì„ í ì‹œìŠ¤í…œ
- [3.1 ê²Œì„ ë§¤ì¹­ ìš”ì²­](#31-ê²Œì„-ë§¤ì¹­-ìš”ì²­)
- [3.2 ê²Œì„ ë§¤ì¹­ ìƒíƒœ ì¡°íšŒ](#32-ê²Œì„-ë§¤ì¹­-ìƒíƒœ-ì¡°íšŒ)
- [3.3 ê²Œì„ ë§¤ì¹­ ì™„ë£Œ](#33-ê²Œì„-ë§¤ì¹­-ì™„ë£Œ)
- [3.4 ê²Œì„ ë§¤ì¹­ ì·¨ì†Œ](#34-ê²Œì„-ë§¤ì¹­-ì·¨ì†Œ)

### 4. ë­í‚¹ í ì‹œìŠ¤í…œ
- [4.1 ì ìˆ˜ ì œì¶œ](#41-ì ìˆ˜-ì œì¶œ)
- [4.2 ë­í‚¹ ì¡°íšŒ](#42-ë­í‚¹-ì¡°íšŒ)
- [4.3 ì¹œêµ¬ ë­í‚¹ ì¡°íšŒ](#43-ì¹œêµ¬-ë­í‚¹-ì¡°íšŒ)
- [4.4 ë­í‚¹ ì—…ë°ì´íŠ¸ ì•Œë¦¼](#44-ë­í‚¹-ì—…ë°ì´íŠ¸-ì•Œë¦¼)

### 5. í¬í„¸ í ì‹œìŠ¤í…œ
- [5.1 íŒŒì¼ ì—…ë¡œë“œ ìš”ì²­](#51-íŒŒì¼-ì—…ë¡œë“œ-ìš”ì²­)
- [5.2 ë°ì´í„° ì²˜ë¦¬ ìš”ì²­](#52-ë°ì´í„°-ì²˜ë¦¬-ìš”ì²­)
- [5.3 ì•Œë¦¼ ë°œì†¡ ìš”ì²­](#53-ì•Œë¦¼-ë°œì†¡-ìš”ì²­)
- [5.4 ì‘ì—… ìƒíƒœ ì¡°íšŒ](#54-ì‘ì—…-ìƒíƒœ-ì¡°íšŒ)

### 6. í†µí•© í ê´€ë¦¬
- [6.1 í ê°„ ì—°ë™](#61-í-ê°„-ì—°ë™)
- [6.2 ìš°ì„ ìˆœìœ„ ê´€ë¦¬](#62-ìš°ì„ ìˆœìœ„-ê´€ë¦¬)
- [6.3 ë¶€í•˜ ë¶„ì‚°](#63-ë¶€í•˜-ë¶„ì‚°)
- [6.4 ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼](#64-ëª¨ë‹ˆí„°ë§-ë°-ì•Œë¦¼)

---

## 1. ì¸ì¦ ë° ì‚¬ìš©ì ê´€ë¦¬

### Phase 1: ê¸°ë³¸ ì¸ì¦ ì‹œìŠ¤í…œ (í˜„ì¬)

#### 1.1 ì‚¬ìš©ì íšŒì›ê°€ì…

#### POST /api/auth/register
ì‚¬ìš©ì íšŒì›ê°€ì…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "username": "string",
  "password": "string",
  "email": "string",
  "nickname": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
```

**Response Codes:**
- `201 Created`: íšŒì›ê°€ì… ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°
- `409 Conflict`: ì‚¬ìš©ìëª… ë˜ëŠ” ì´ë©”ì¼ ì¤‘ë³µ

**Response Body (201):**
```json
{
  "success": true,
  "message": "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "userId": "user123",
    "username": "user123",
    "email": "user@example.com",
    "nickname": "ë‹‰ë„¤ì„",
    "role": "NORMAL",
    "status": "ACTIVE",
    "createdAt": "2024-12-18T10:00:00Z"
  }
}
```

**Response Body (400):**
```json
{
  "success": false,
  "message": "ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°ì…ë‹ˆë‹¤.",
  "errors": [
    {
      "field": "password",
      "message": "ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."
    }
  ]
}
```

**Response Body (409):**
```json
{
  "success": false,
  "message": "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì‚¬ìš©ìëª…ì…ë‹ˆë‹¤.",
  "error": "USERNAME_EXISTS"
}
```

#### 1.2 ì‚¬ìš©ì ë¡œê·¸ì¸

#### POST /api/auth/login
ì‚¬ìš©ì ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "username": "string",
  "password": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
```

**Response Codes:**
- `200 OK`: ë¡œê·¸ì¸ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `423 Locked`: ê³„ì • ì ê¹€

**Response Body (200):**
```json
{
  "success": true,
  "message": "ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 900,
    "user": {
      "userId": "user123",
      "username": "user123",
      "email": "user@example.com",
      "nickname": "ë‹‰ë„¤ì„",
      "role": "NORMAL",
      "status": "ACTIVE"
    }
  }
}
```

**Response Body (401):**
```json
{
  "success": false,
  "message": "ì‚¬ìš©ìëª… ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.",
  "error": "INVALID_CREDENTIALS"
}
```

#### 1.3 í† í° ê°±ì‹ 

#### POST /api/auth/refresh
JWT í† í°ì„ ê°±ì‹ í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "refreshToken": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
```

**Response Codes:**
- `200 OK`: í† í° ê°±ì‹  ì„±ê³µ
- `401 Unauthorized`: í† í° ë¬´íš¨

**Response Body (200):**
```json
{
  "success": true,
  "message": "í† í°ì´ ê°±ì‹ ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 900
  }
}
```

#### 1.4 ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ

#### POST /api/auth/logout
ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### Phase 2: IAM ê¸°ë°˜ ê³ ê¸‰ ì‹œìŠ¤í…œ (ì¶”í›„)

#### 1.5 IAM ê¸°ë°˜ ì‚¬ìš©ì íšŒì›ê°€ì…

#### POST /api/auth/register
IAM ì‹œìŠ¤í…œì„ í†µí•œ ì‚¬ìš©ì íšŒì›ê°€ì…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "username": "string",
  "password": "string",
  "email": "string",
  "nickname": "string",
  "iamGroups": ["Normal_Users"]
}
```

**Response Codes:**
- `201 Created`: íšŒì›ê°€ì… ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°
- `409 Conflict`: ì‚¬ìš©ìëª… ë˜ëŠ” ì´ë©”ì¼ ì¤‘ë³µ

**Response Body (201):**
```json
{
  "success": true,
  "message": "IAM íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "userId": "ì‚¬ìš©ìID",
  "username": "ì‚¬ìš©ìëª…",
  "iamGroups": ["Normal_Users"],
  "iamPolicies": ["basic_access"]
}
```

#### 1.6 IAM ê¸°ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸

#### POST /api/auth/login
IAM ì‹œìŠ¤í…œì„ í†µí•œ ì‚¬ìš©ì ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "username": "string",
  "password": "string"
}
```

**Response Codes:**
- `200 OK`: ë¡œê·¸ì¸ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `403 Forbidden`: ê³„ì • ì ê¸ˆ

**Response Body (200):**
```json
{
  "success": true,
  "message": "IAM ë¡œê·¸ì¸ ì„±ê³µ",
  "token": "IAM_JWT_ì•¡ì„¸ìŠ¤_í† í°",
  "username": "ì‚¬ìš©ìëª…",
  "iamGroups": ["VIP_Users"],
  "iamPolicies": ["queue_priority", "game_early_access"]
}
```

#### 1.7 IAM í† í° ê°±ì‹ 

#### POST /api/auth/refresh
IAM í† í°ì„ ê°±ì‹ í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "refreshToken": "IAM_ë¦¬í”„ë ˆì‹œ_í† í°"
}
```

**Response Codes:**
- `200 OK`: í† í° ê°±ì‹  ì„±ê³µ
- `401 Unauthorized`: í† í° ë¬´íš¨

**Response Body (200):**
```json
{
  "success": true,
  "message": "IAM í† í° ê°±ì‹  ì„±ê³µ",
  "token": "ìƒˆë¡œìš´_IAM_JWT_ì•¡ì„¸ìŠ¤_í† í°"
}
```

#### 1.8 IAM ê¸°ë°˜ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ

#### POST /api/auth/logout
IAM ì‹œìŠ¤í…œì„ í†µí•œ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**Request Headers:**
```
Authorization: Bearer IAM_JWT_í† í°
```

**Response Codes:**
- `200 OK`: ë¡œê·¸ì•„ì›ƒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "message": "IAM ë¡œê·¸ì•„ì›ƒ ì„±ê³µ"
}
```

#### 1.9 IAM ê·¸ë£¹ ê´€ë¦¬

#### GET /api/iam/groups
IAM ê·¸ë£¹ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ê·¸ë£¹ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "groups": [
      {
        "groupId": "group123",
        "groupName": "VIP Users",
        "description": "VIP ì‚¬ìš©ì ê·¸ë£¹",
        "memberCount": 150,
        "permissions": ["queue_priority", "game_early_access"]
      },
      {
        "groupId": "group456",
        "groupName": "Premium Users",
        "description": "í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ê·¸ë£¹",
        "memberCount": 500,
        "permissions": ["queue_priority"]
      }
    ]
  }
}
```

#### 1.10 IAM ì •ì±… ê´€ë¦¬

#### GET /api/iam/policies
IAM ì •ì±… ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ì •ì±… ëª©ë¡ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "policies": [
      {
        "policyId": "policy123",
        "policyName": "Queue Access Policy",
        "description": "í ì ‘ê·¼ ì •ì±…",
        "rules": [
          {
            "action": "queue:join",
            "resource": "queue:login",
            "condition": "user.role == 'VIP'"
          }
        ]
      }
    ]
  }
}
```

#### 1.11 IAM ê¶Œí•œ ê²€ì¦

#### POST /api/iam/check-permission
ì‚¬ìš©ìì˜ íŠ¹ì • ê¶Œí•œì„ ê²€ì¦í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "action": "string",
  "resource": "string",
  "context": {
    "queueType": "string",
    "userId": "string"
  }
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ê¶Œí•œ ê²€ì¦ ì™„ë£Œ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `403 Forbidden`: ê¶Œí•œ ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "allowed": true,
    "reason": "User has VIP role with queue priority access",
    "policyMatched": "policy123"
  }
}
```

**Request Body:**
```json
{
  "refreshToken": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ë¡œê·¸ì•„ì›ƒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "message": "ë¡œê·¸ì•„ì›ƒì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## 2. ë¡œê·¸ì¸ í ì‹œìŠ¤í…œ

### 2.1 ë¡œê·¸ì¸ í ì§„ì…

#### POST /api/queue/login/join
ë¡œê·¸ì¸ íì— ì§„ì…í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "priority": "VIP" | "PREMIUM" | "NORMAL" | "ADMIN"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: í ì§„ì… ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `409 Conflict`: ì´ë¯¸ íì— ìˆìŒ

**Response Body (200):**
```json
{
  "success": true,
  "message": "íì— ì§„ì…í–ˆìŠµë‹ˆë‹¤.",
  "data": {
    "position": 150,
    "estimatedWaitTime": 30,
    "totalWaiting": 5000,
    "processingRate": 100,
    "priority": "NORMAL"
  }
}
```

### 2.2 ë¡œê·¸ì¸ í ìƒíƒœ ì¡°íšŒ

#### GET /api/queue/login/status/{userId}
ë¡œê·¸ì¸ í ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**Path Parameters:**
- `userId` (string): ì‚¬ìš©ì ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ìƒíƒœ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `404 Not Found`: íì— ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "position": 150,
    "estimatedWaitTime": 30,
    "totalWaiting": 5000,
    "processingRate": 100,
    "priority": "NORMAL",
    "joinedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 2.3 ë¡œê·¸ì¸ í ì²˜ë¦¬

#### GET /api/queue/login/process
ë‹¤ìŒ ì‚¬ìš©ìë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. (ë‚´ë¶€ API)

**Request Headers:**
```
Authorization: Bearer {serviceToken}
```

**Response Codes:**
- `200 OK`: ì²˜ë¦¬ ì„±ê³µ
- `204 No Content`: ì²˜ë¦¬í•  ì‚¬ìš©ì ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "userId": "user123",
    "processedAt": "2024-12-18T10:00:00Z",
    "nextPosition": 149
  }
}
```

### 2.4 ë¡œê·¸ì¸ í í‡´ì¥

#### DELETE /api/queue/login/leave/{userId}
ë¡œê·¸ì¸ íì—ì„œ í‡´ì¥í•©ë‹ˆë‹¤.

**Path Parameters:**
- `userId` (string): ì‚¬ìš©ì ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: í‡´ì¥ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `404 Not Found`: íì— ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "message": "íì—ì„œ í‡´ì¥í–ˆìŠµë‹ˆë‹¤."
}
```

---

## 3. ê²Œì„ í ì‹œìŠ¤í…œ

### 3.1 ê²Œì„ ë§¤ì¹­ ìš”ì²­

#### POST /api/queue/game/match
ê²Œì„ ë§¤ì¹­ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "difficulty": "easy" | "medium" | "hard" | "expert",
  "level": "number",
  "preferences": {
    "region": "string",
    "maxWaitTime": "number",
    "gameMode": "string"
  }
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ë§¤ì¹­ ì„±ê³µ
- `202 Accepted`: ë§¤ì¹­ ëŒ€ê¸°
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "message": "ë§¤ì¹­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "gameSessionId": "session123",
    "matchedUsers": ["user456", "user789"],
    "difficulty": "medium",
    "level": 5,
    "startTime": "2024-12-18T10:00:00Z"
  }
}
```

**Response Body (202):**
```json
{
  "success": true,
  "message": "ë§¤ì¹­ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì…ë‹ˆë‹¤.",
  "data": {
    "estimatedMatchTime": 30,
    "currentWaitTime": 0,
    "difficulty": "medium",
    "level": 5
  }
}
```

### 3.2 ê²Œì„ ë§¤ì¹­ ìƒíƒœ ì¡°íšŒ

#### GET /api/queue/game/status/{userId}
ê²Œì„ ë§¤ì¹­ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**Path Parameters:**
- `userId` (string): ì‚¬ìš©ì ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ìƒíƒœ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `404 Not Found`: ë§¤ì¹­ ìš”ì²­ ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "status": "matching" | "matched" | "cancelled",
    "waitTime": 15,
    "estimatedMatchTime": 10,
    "difficulty": "medium",
    "level": 5,
    "matchedUsers": ["user456", "user789"],
    "gameSessionId": "session123"
  }
}
```

### 3.3 ê²Œì„ ë§¤ì¹­ ì™„ë£Œ

#### POST /api/queue/game/complete
ê²Œì„ ë§¤ì¹­ì„ ì™„ë£Œí•©ë‹ˆë‹¤. (ë‚´ë¶€ API)

**Request Body:**
```json
{
  "userId": "string",
  "gameSessionId": "string",
  "matchedUsers": ["string"],
  "difficulty": "string",
  "level": "number"
}
```

**Request Headers:**
```
Authorization: Bearer {serviceToken}
```

**Response Codes:**
- `200 OK`: ì™„ë£Œ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "gameSessionId": "session123",
    "completedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 3.4 ê²Œì„ ë§¤ì¹­ ì·¨ì†Œ

#### DELETE /api/queue/game/cancel/{userId}
ê²Œì„ ë§¤ì¹­ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.

**Path Parameters:**
- `userId` (string): ì‚¬ìš©ì ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ì·¨ì†Œ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `404 Not Found`: ë§¤ì¹­ ìš”ì²­ ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "message": "ë§¤ì¹­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## 4. ë­í‚¹ í ì‹œìŠ¤í…œ

### 4.1 ì ìˆ˜ ì œì¶œ

#### POST /api/queue/ranking/submit
ê²Œì„ ì ìˆ˜ë¥¼ ì œì¶œí•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "score": "number",
  "gameType": "string",
  "difficulty": "easy" | "medium" | "hard" | "expert",
  "gameSessionId": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `202 Accepted`: ì ìˆ˜ ì œì¶œ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (202):**
```json
{
  "success": true,
  "message": "ì ìˆ˜ê°€ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "taskId": "task123",
    "estimatedProcessingTime": 5,
    "submittedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 4.2 ë­í‚¹ ì¡°íšŒ

#### GET /api/queue/ranking/{type}/{period}
ë­í‚¹ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**Path Parameters:**
- `type` (string): ë­í‚¹ íƒ€ì… (total, daily, weekly, monthly)
- `period` (string): ê¸°ê°„ (YYYYMMDD, YYYY-WW, YYYY-MM)

**Query Parameters:**
- `limit` (number, optional): ì¡°íšŒí•  ê°œìˆ˜ (ê¸°ë³¸ê°’: 100)
- `offset` (number, optional): ì‹œì‘ ìœ„ì¹˜ (ê¸°ë³¸ê°’: 0)

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ë­í‚¹ ì¡°íšŒ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "rankings": [
      {
        "rank": 1,
        "userId": "user456",
        "username": "user456",
        "nickname": "ë‹‰ë„¤ì„456",
        "score": 20000,
        "difficulty": "medium",
        "achievedAt": "2024-12-18T10:00:00Z"
      },
      {
        "rank": 2,
        "userId": "user789",
        "username": "user789",
        "nickname": "ë‹‰ë„¤ì„789",
        "score": 18000,
        "difficulty": "medium",
        "achievedAt": "2024-12-18T09:30:00Z"
      }
    ],
    "userRank": 15,
    "totalPlayers": 100000,
    "period": "20241218",
    "type": "daily"
  }
}
```

### 4.3 ì¹œêµ¬ ë­í‚¹ ì¡°íšŒ

#### GET /api/queue/ranking/friends/{userId}
ì¹œêµ¬ ë­í‚¹ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**Path Parameters:**
- `userId` (string): ì‚¬ìš©ì ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ì¹œêµ¬ ë­í‚¹ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `404 Not Found`: ì‚¬ìš©ì ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "friendRankings": [
      {
        "rank": 1,
        "userId": "friend123",
        "username": "friend123",
        "nickname": "ì¹œêµ¬1",
        "score": 15000,
        "difficulty": "medium"
      },
      {
        "rank": 2,
        "userId": "friend456",
        "username": "friend456",
        "nickname": "ì¹œêµ¬2",
        "score": 12000,
        "difficulty": "easy"
      }
    ],
    "userRank": 3,
    "totalFriends": 50
  }
}
```

### 4.4 ë­í‚¹ ì—…ë°ì´íŠ¸ ì•Œë¦¼

#### GET /api/queue/ranking/notifications/{userId}
ë­í‚¹ ì—…ë°ì´íŠ¸ ì•Œë¦¼ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**Path Parameters:**
- `userId` (string): ì‚¬ìš©ì ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ì•Œë¦¼ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "notifications": [
      {
        "id": "notif123",
        "type": "RANKING_UPDATE",
        "message": "ë­í‚¹ì´ 15ìœ„ì—ì„œ 12ìœ„ë¡œ ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤.",
        "createdAt": "2024-12-18T10:00:00Z",
        "read": false
      },
      {
        "id": "notif456",
        "type": "NEW_RECORD",
        "message": "ìƒˆë¡œìš´ ìµœê³  ê¸°ë¡ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤!",
        "createdAt": "2024-12-18T09:30:00Z",
        "read": true
      }
    ],
    "unreadCount": 1
  }
}
```

---

## 5. í¬í„¸ í ì‹œìŠ¤í…œ

### 5.1 íŒŒì¼ ì—…ë¡œë“œ ìš”ì²­

#### POST /api/queue/portal/submit
íŒŒì¼ ì—…ë¡œë“œ ì‘ì—…ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "taskType": "file_upload",
  "fileData": "string",
  "fileName": "string",
  "fileSize": "number",
  "priority": "high" | "normal" | "low"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `202 Accepted`: ì‘ì—… ìš”ì²­ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `413 Payload Too Large`: íŒŒì¼ í¬ê¸° ì´ˆê³¼

**Response Body (202):**
```json
{
  "success": true,
  "message": "íŒŒì¼ ì—…ë¡œë“œ ì‘ì—…ì´ ìš”ì²­ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "taskId": "task123",
    "estimatedCompletion": 30,
    "priority": "normal",
    "submittedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 5.2 ë°ì´í„° ì²˜ë¦¬ ìš”ì²­

#### POST /api/queue/portal/submit
ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "taskType": "data_processing",
  "data": "object",
  "processingType": "string",
  "priority": "high" | "normal" | "low"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `202 Accepted`: ì‘ì—… ìš”ì²­ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (202):**
```json
{
  "success": true,
  "message": "ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì´ ìš”ì²­ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "taskId": "task456",
    "estimatedCompletion": 60,
    "priority": "normal",
    "submittedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 5.3 ì•Œë¦¼ ë°œì†¡ ìš”ì²­

#### POST /api/queue/portal/submit
ì•Œë¦¼ ë°œì†¡ ì‘ì—…ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "taskType": "notification",
  "message": "string",
  "recipients": ["string"],
  "notificationType": "email" | "sms" | "push",
  "priority": "high" | "normal" | "low"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `202 Accepted`: ì‘ì—… ìš”ì²­ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨

**Response Body (202):**
```json
{
  "success": true,
  "message": "ì•Œë¦¼ ë°œì†¡ ì‘ì—…ì´ ìš”ì²­ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "taskId": "task789",
    "estimatedCompletion": 10,
    "priority": "high",
    "submittedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 5.4 ì‘ì—… ìƒíƒœ ì¡°íšŒ

#### GET /api/queue/portal/status/{taskId}
í¬í„¸ ì‘ì—… ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**Path Parameters:**
- `taskId` (string): ì‘ì—… ID

**Request Headers:**
```
Authorization: Bearer {accessToken}
```

**Response Codes:**
- `200 OK`: ìƒíƒœ ì¡°íšŒ ì„±ê³µ
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `404 Not Found`: ì‘ì—… ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "taskId": "task123",
    "status": "pending" | "processing" | "completed" | "failed",
    "progress": 75,
    "taskType": "file_upload",
    "priority": "normal",
    "createdAt": "2024-12-18T10:00:00Z",
    "startedAt": "2024-12-18T10:01:00Z",
    "completedAt": "2024-12-18T10:02:00Z",
    "result": {
      "fileUrl": "https://storage.example.com/files/uploaded_file.pdf",
      "fileSize": 1024000,
      "processedAt": "2024-12-18T10:02:00Z"
    },
    "error": null
  }
}
```

---

## 6. í†µí•© í ê´€ë¦¬

### 6.1 í ê°„ ì—°ë™

#### POST /api/queue/integration/transfer
í ê°„ ì‚¬ìš©ìë¥¼ ì´ë™ì‹œí‚µë‹ˆë‹¤.

**Request Body:**
```json
{
  "userId": "string",
  "fromQueue": "string",
  "toQueue": "string",
  "reason": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {serviceToken}
```

**Response Codes:**
- `200 OK`: ì´ë™ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `404 Not Found`: ì‚¬ìš©ì ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "message": "í ì´ë™ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "userId": "user123",
    "fromQueue": "login",
    "toQueue": "game",
    "movedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 6.2 ìš°ì„ ìˆœìœ„ ê´€ë¦¬

#### PUT /api/queue/priority/adjust
í ìš°ì„ ìˆœìœ„ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.

**Request Body:**
```json
{
  "queueType": "string",
  "newPriority": "number",
  "reason": "string"
}
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Bearer {adminToken}
```

**Response Codes:**
- `200 OK`: ìš°ì„ ìˆœìœ„ ì¡°ì • ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `403 Forbidden`: ê¶Œí•œ ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "message": "ìš°ì„ ìˆœìœ„ê°€ ì¡°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "queueType": "login",
    "oldPriority": 1.0,
    "newPriority": 1.2,
    "adjustedAt": "2024-12-18T10:00:00Z"
  }
}
```

### 6.3 ë¶€í•˜ ë¶„ì‚°

#### GET /api/queue/load/status
í ë¶€í•˜ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**Request Headers:**
```
Authorization: Bearer {adminToken}
```

**Response Codes:**
- `200 OK`: ìƒíƒœ ì¡°íšŒ ì„±ê³µ
- `403 Forbidden`: ê¶Œí•œ ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "queues": [
      {
        "queueType": "login",
        "currentLoad": 75,
        "maxCapacity": 100,
        "loadRatio": 0.75,
        "processingRate": 100,
        "waitingCount": 5000
      },
      {
        "queueType": "game",
        "currentLoad": 60,
        "maxCapacity": 100,
        "loadRatio": 0.60,
        "processingRate": 50,
        "waitingCount": 2000
      }
    ],
    "systemResources": {
      "cpuUsage": 65,
      "memoryUsage": 70,
      "diskUsage": 45,
      "networkUsage": 30
    },
    "lastUpdated": "2024-12-18T10:00:00Z"
  }
}
```

### 6.4 ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

#### GET /api/queue/monitoring/metrics
í ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**Query Parameters:**
- `timeRange` (string, optional): ì‹œê°„ ë²”ìœ„ (1h, 24h, 7d, 30d)
- `queueType` (string, optional): í íƒ€ì… í•„í„°

**Request Headers:**
```
Authorization: Bearer {adminToken}
```

**Response Codes:**
- `200 OK`: ë©”íŠ¸ë¦­ ì¡°íšŒ ì„±ê³µ
- `403 Forbidden`: ê¶Œí•œ ì—†ìŒ

**Response Body (200):**
```json
{
  "success": true,
  "data": {
    "timeRange": "24h",
    "metrics": {
      "processingRate": {
        "login": 100,
        "game": 50,
        "ranking": 200,
        "portal": 30
      },
      "averageWaitTime": {
        "login": 30,
        "game": 15,
        "ranking": 5,
        "portal": 60
      },
      "errorRate": {
        "login": 0.1,
        "game": 0.2,
        "ranking": 0.05,
        "portal": 0.3
      },
      "throughput": {
        "total": 10000,
        "successful": 9950,
        "failed": 50
      }
    },
    "alerts": [
      {
        "id": "alert123",
        "type": "HIGH_LOAD",
        "message": "ë¡œê·¸ì¸ í ë¶€í•˜ê°€ 80%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.",
        "severity": "warning",
        "createdAt": "2024-12-18T10:00:00Z"
      }
    ]
  }
}
```

---

## ğŸ“Š ê³µí†µ ì‘ë‹µ í˜•ì‹

### ì„±ê³µ ì‘ë‹µ
```json
{
  "success": true,
  "message": "string",
  "data": "object",
  "timestamp": "2024-12-18T10:00:00Z"
}
```

### ì—ëŸ¬ ì‘ë‹µ
```json
{
  "success": false,
  "message": "string",
  "error": "string",
  "errors": [
    {
      "field": "string",
      "message": "string"
    }
  ],
  "timestamp": "2024-12-18T10:00:00Z"
}
```

---

## ğŸ” ì¸ì¦ ë° ê¶Œí•œ

### JWT í† í°
- **Access Token**: 15ë¶„ ë§Œë£Œ
- **Refresh Token**: 7ì¼ ë§Œë£Œ
- **Algorithm**: HS256
- **Header**: `Authorization: Bearer {token}`

### ê¶Œí•œ ë ˆë²¨
- **ADMIN**: ëª¨ë“  API ì ‘ê·¼ ê°€ëŠ¥
- **VIP**: ìš°ì„ ìˆœìœ„ ë†’ì€ í ì ‘ê·¼
- **PREMIUM**: ì¼ë°˜ í ì ‘ê·¼
- **NORMAL**: ê¸°ë³¸ í ì ‘ê·¼

### Rate Limiting
- **ì¼ë°˜ ì‚¬ìš©ì**: ì´ˆë‹¹ 100íšŒ ìš”ì²­
- **VIP ì‚¬ìš©ì**: ì´ˆë‹¹ 200íšŒ ìš”ì²­
- **ê´€ë¦¬ì**: ì´ˆë‹¹ 500íšŒ ìš”ì²­

---

## ğŸ“ ì—ëŸ¬ ì½”ë“œ

### HTTP ìƒíƒœ ì½”ë“œ
- `200 OK`: ì„±ê³µ
- `201 Created`: ìƒì„± ì„±ê³µ
- `202 Accepted`: ìš”ì²­ ìˆ˜ë½
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ ì‹¤íŒ¨
- `403 Forbidden`: ê¶Œí•œ ì—†ìŒ
- `404 Not Found`: ë¦¬ì†ŒìŠ¤ ì—†ìŒ
- `409 Conflict`: ì¶©ëŒ
- `413 Payload Too Large`: í˜ì´ë¡œë“œ ì´ˆê³¼
- `429 Too Many Requests`: ìš”ì²­ ì œí•œ ì´ˆê³¼
- `500 Internal Server Error`: ì„œë²„ ì˜¤ë¥˜

### ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ
- `USERNAME_EXISTS`: ì‚¬ìš©ìëª… ì¤‘ë³µ
- `EMAIL_EXISTS`: ì´ë©”ì¼ ì¤‘ë³µ
- `INVALID_CREDENTIALS`: ì¸ì¦ ì •ë³´ ì˜¤ë¥˜
- `TOKEN_EXPIRED`: í† í° ë§Œë£Œ
- `ACCOUNT_LOCKED`: ê³„ì • ì ê¹€
- `QUEUE_FULL`: í ê°€ë“ì°¸
- `ALREADY_IN_QUEUE`: ì´ë¯¸ íì— ìˆìŒ
- `INVALID_SCORE`: ì˜ëª»ëœ ì ìˆ˜
- `MATCH_NOT_FOUND`: ë§¤ì¹­ ì—†ìŒ
- `TASK_NOT_FOUND`: ì‘ì—… ì—†ìŒ

---

## ğŸ”§ ê°œë°œ ë„êµ¬

### API í…ŒìŠ¤íŠ¸
- **Postman Collection**: API í…ŒìŠ¤íŠ¸ ì»¬ë ‰ì…˜
- **Swagger UI**: API ë¬¸ì„œ ë° í…ŒìŠ¤íŠ¸
- **Insomnia**: REST í´ë¼ì´ì–¸íŠ¸

### ëª¨ë‹ˆí„°ë§
- **Prometheus**: ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- **Grafana**: ëŒ€ì‹œë³´ë“œ
- **Jaeger**: ë¶„ì‚° ì¶”ì 

### ë¡œê¹…
- **ELK Stack**: ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„
- **Fluentd**: ë¡œê·¸ ì „ì†¡
- **Kibana**: ë¡œê·¸ ì‹œê°í™”
